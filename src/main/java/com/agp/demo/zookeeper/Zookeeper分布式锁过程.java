package com.agp.demo.zookeeper;

/**Zookeeper会为顺序节点加上一个自增的数字后缀作为新的节点名。
 *
 *
 * 1）各个客户端调用create()方法创建名为“ locknode/lock-”的节点，
 * 需要注意的是，节点的创建类型需要设置为EPHEMERAL_SEQUENTIAL  （Zookeeper会给自动加上一个自增数字后缀）
 *
 * 2）各个客户端调用getChildren(“locknode”)方法来获取所有已经创建的子节点。
 *
 * 3）各个客户端获取到所有子节点path之后，如果发现自己在步骤1）
 * 中创建的节点序号最小，那么就认为这个客户端获得了锁
 *
 * 4）其他客户端如果在步骤3）中发现自己并非所有子节点中最小的，
 * 说明集群中其他进程获取到了这把锁。
 * ，然后对其调用exist()方法，同时注册事件监听。
 *
 * 5）一旦最小子节点对应的进程释放了分布式锁，
 * 对应的临时节点就会被移除，客户端因为注册了事件监听而收到相应的通知。
 * 这个时候客户端需要再次调用getChildren("locknode")方法
 * 来获取所有已经创建的子节点，然后进入步骤3。
 */
public class Zookeeper分布式锁过程 {

}
